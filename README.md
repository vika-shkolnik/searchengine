# **Итоговый проект курса Java-разработчик «Поисковый движок»**

### **Описание проекта:**

Spring-приложение (JAR-файл, запускаемый на любом сервере или компьютере), работающее с локально установленной базой данных MySQL, имеющее простой веб-интерфейс и API, через который им можно управлять и получать результаты поисковой выдачи по запросу.
Поисковый движок, позволяет быстро находить страницы сайтов по заданному запросу.

### **Принципы работы поискового движка:**

1. В конфигурационном файле перед запуском приложения задаются адреса сайтов, по которым движок должен осуществлять поиск.
2. Поисковый движок должен самостоятельно обходить все страницы заданных сайтов и индексировать их (создавать так называемый индекс) так, чтобы потом находить наиболее релевантные страницы по любому поисковому запросу.
3. Пользователь присылает запрос через API движка. Запрос — это набор слов, по которым нужно найти страницы сайта.
4. Запрос определённым образом трансформируется в список слов, переведённых в базовую форму. Например, для существительных — именительный падеж, единственное число.
5. В индексе ищутся страницы, на которых встречаются все эти слова.
6. Результаты поиска ранжируются, сортируются и отдаются пользователю.

### **Функционал программы:**

* Создание таблиц в БД и работа с ними с помощью технологии Hibernate.
* Многопоточная индексация сайтов с помощью ForkJoinPool
* Рекурсивный парсинг всех страниц заданных сайтов
* Индексация всех страниц сайта и отдельной страницы
* Преобразование всех слов в леммы
* Вывод статистики на основе полученных данных
* Поиск страниц с учетом релевантности по заданому запросу
* Поиск страниц для отдельного сайта и для всех сайтов
* Вывод сниппетов

### **Стэк используемых технологий:**

* Java 22.0.2
* Spring Boot 2.7.1
* Maven 4.0.0
* ORM Hibernate
* DB MySQL80
* Lombok Library
* JSOUP Library
* Morphology Library


### **Спецификация API:**

* ***GET /api/startIndexing:***

>Метод запускает полную индексацию всех сайтов или полную переиндексацию, если они уже проиндексированы. 
Если в настоящий момент индексация или переиндексация уже запущена, метод возвращает соответствующее сообщение об ошибке.

>***Параметры:*** Метод без параметров.

* ***GET /api/stopIndexing***

>Метод останавливает текущий процесс индексации (переиндексации). 
Если в настоящий момент индексация или переиндексация не происходит, метод возвращает соответствующее сообщение об ошибке.

>***Параметры:*** Метод без параметров.

* ***POST /api/indexPage***

>Метод добавляет в индекс или обновляет отдельную страницу, адрес которой передан в параметре. 
Если адрес страницы передан неверно, метод должен вернуть соответствующую ошибку.

>***Параметры:*** url — адрес страницы, которую нужно переиндексировать.

* ***GET /api/statistics***

>Метод возвращает статистику и другую служебную информацию о состоянии поисковых индексов и самого движка.

>***Параметры:*** Метод без параметров.

* ***GET /api/search***

>Метод осуществляет поиск страниц по переданному поисковому запросу. 
В ответе выводится общее количество результатов, и массив с результатами поиска. 
Если поисковый запрос не задан или ещё нет готового индекса (сайт, по которому ищем, или все сайты сразу не проиндексированы), мотод возвращает соответствующую ошибку.

>***Параметры:***

>* query — поисковый запрос;
>* site — сайт, по которому осуществлять поиск, если не задан, поиск происходит по всем проиндексированным сайтам.
>* offset — сдвиг от 0 для постраничного вывода (параметр необязательный; если не установлен, то значение по умолчанию равно нулю);
>* limit — количество результатов, которое необходимо вывести (параметр необязательный; если не установлен, то значение по умолчанию равно 20).

### **Инструкция по запуску проекта**

***Требования:***

* MySQL80
* JRE

***Шаги:***

1. В каталоге out->artifacts->SearchEngine_jar скачать файл SearchEngine.jar
2. Поместить в удобное место.
3. Запустить MySQL80, и создать схему с именем "search_engine"
4. Заполнить в файле application.yaml в папке searcheengine/src/main/resources данные для подключения к БД
5. Открыть терминал и перейти в папку с данными SearchEngine.jar
6. Командой "java -jar SearchEngine.jar" запустить программу
7. Зайти в браузер, в поисковике ввести http://localhost:8080/

### **Работа с веб-интерфейсом:**

Веб-интерфейс представляет собой одну веб-страницу с тремя вкладками:

* **Dashboard** 
* **Management**
* **Search** 

На первой отображается общая статистика по всем сайтам:
* количество заданных сайтов;
* количество проиндексированных страниц; 
* количество найденных лемм на проиндексированных страницах;
* детальная статистика и статус по каждому из сайтов: 
  * время последней индексации (периндексации);
  * найденные леммы; 
  * найденные страницы для данного сайта;
  * ошибка (если присутствует)

>Для получения актуальной информации необходимо обновлять страницу

На второй находятся инструменты управления поисковым движком:
* кнопка **START INDEXING** или **STOP INDEXING** - запуск и остановка полной индексации (переиндексации).
* кнопка **ADD/UPDATE** - добавить (обновить) отдельную страницу по ссылке.

На третьей - инструменты для тестирования поискового движка:
* поле поиска
* выпадающий список с выбором сайта для поиска
* кнопка **SEARCH**, которая выводит результаты поиска по запросу из поля **Query**